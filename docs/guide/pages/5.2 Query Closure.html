<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>5.2 Query Closure</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    You can use the <a href="http://www.elasticsearch.org/guide/reference/groovy-api/search.html" target="blank">Groovy Query DSL</a> to build your search query as a <code>Closure</code>.
The format of the search <code>Closure</code> follow the same JSON syntax as the <a href="http://www.elasticsearch.org/guide/reference/api/search/" target="blank">ElasticSearch REST API</a>
and the <a href="http://www.elasticsearch.org/guide/reference/java-api/query-dsl.html" target="blank">Java Query DSL</a>.<p class="paragraph"/><strong class="bold">Example</strong>
<div class="code"><pre>def result = elasticSearchService.search(searchType:'dfs_query_and_fetch') &#123;
  bool &#123;
      must &#123;
          query_string(query: params.query)
      &#125;
      <span class="java&#45;keyword">if</span> (params.firstname) &#123;
          must &#123;
              term(firstname: params.firstname)
          &#125;
      &#125;
  &#125;
&#125;</pre></div>
    </body>
</html>
