<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>2. Configuration</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    The plugin provide a default configuration, but you may add your own settings in your <strong class="bold">Config.groovy</strong> script.<p class="paragraph"/><h4>Client mode</h4>
You can set the plugin in 3 different modes, detailled on the <a href="http://www.elasticsearch.com/docs/elasticsearch/java_api/client/" target="blank">official ElasticSearch doc</a>.
The mode is defined with the following config key:<p class="paragraph"/><div class="code"><pre>elasticSearch.client.mode = '&#60;mode&#62;'</pre></div><p class="paragraph"/><strong class="bold">Possible values:</strong>
<ul class="star">
<li><strong class="bold">node</strong>: The plugin create its own node and join the ElasticSearch cluster as a client node (<code>node.client = true</code>).</li>
</ul><p class="paragraph"/>This setting requires that you have an ElasticSearch instance running and available on your network (use the discovery feature)
<ul class="star">
<li><strong class="bold">local</strong>: The plugin create its own local (to the JVM) node. Does not require any running ElasticSearch instance. Useful for</li>
</ul><p class="paragraph"/>development or testing.
<ul class="star">
<li><strong class="bold">transport</strong>: The plugin create a transport client that will connect to a remote ElasticSearch instance without joining the cluster.</li>
</ul><p class="paragraph"/>"Transport" mode needs you to provide the host address and port. You can define one or multiple hosts with the following config key:<p class="paragraph"/><div class="code"><pre>elasticSearch.client.hosts = &#91;
       &#91;host:'192.168.0.3', port:9300&#93;,
       &#91;host:'228.168.0.4', port:9300&#93;
&#93;</pre></div>
If no host is defined, <code>localhost:9300</code> will be used by the transport client.<p class="paragraph"/><h4>Others properties</h4>
<ul class="star">
<li><code>elasticSearch.date.formats</code></li>
</ul><p class="paragraph"/>List of date formats used by the JSON unmarshaller to parse any date field properly.
Note : future version of the plugin may change how formats are manipulated.
<ul class="star">
<li><code>elasticSearch.defaultExcludedProperties</code></li>
</ul><p class="paragraph"/>List of domain class properties to automatically ignore (will not be indexed) if their name match one of those.
This will only apply to default-mapped domain class, with the static <code>searchable</code> property set to "true", and will
not be considered when using closure mapping.<p class="paragraph"/><h4>Default configuration script</h4>
Below is the default configuration loaded by the plugin (any of your settings in the Config.groovy script overwrite those).<p class="paragraph"/><div class="code"><pre>elasticSearch &#123;
  /&#42;&#42;
   &#42; Date formats used by the unmarshaller of the JSON responses
   &#42;/
  date.formats = &#91;<span class="java&#45;quote">"yyyy&#45;MM&#45;dd'T'HH:mm:ss'Z'"</span>&#93;<p class="paragraph"/>  /&#42;&#42;
   &#42; Hosts <span class="java&#45;keyword">for</span> remote ElasticSearch instances.
   &#42; Will only be used with the <span class="java&#45;quote">"transport"</span> client mode.
   &#42; If the client mode is set to <span class="java&#45;quote">"transport"</span> and no hosts are defined, &#91;<span class="java&#45;quote">"localhost"</span>, 9300&#93; will be used by <span class="java&#45;keyword">default</span>.
   &#42;/
  client.hosts = &#91;
          &#91;host:'localhost', port:9300&#93;
  &#93;<p class="paragraph"/>  /&#42;&#42;
   &#42; Default mapping property exclusions
   &#42;
   &#42; No properties matching the given names will be mapped by <span class="java&#45;keyword">default</span>
   &#42; ie, when using <span class="java&#45;quote">"searchable = <span class="java&#45;keyword">true</span>"</span>
   &#42;
   &#42; This does not apply <span class="java&#45;keyword">for</span> classes using mapping by closure
   &#42;/
  defaultExcludedProperties = &#91;<span class="java&#45;quote">"password"</span>&#93;
&#125;<p class="paragraph"/>environments &#123;
  development &#123;
    /&#42;&#42;
     &#42; Possible values : <span class="java&#45;quote">"local"</span>, <span class="java&#45;quote">"node"</span>, <span class="java&#45;quote">"transport"</span>
     &#42; If set to <span class="java&#45;keyword">null</span>, <span class="java&#45;quote">"node"</span> mode is used by <span class="java&#45;keyword">default</span>.
     &#42;/
    elasticSearch.client.mode = 'local'
  &#125;
  test &#123;
    elasticSearch.client.mode = 'local'
  &#125;
  production &#123;
    elasticSearch.client.mode = 'node'
  &#125;
&#125;</pre></div>
    </body>
</html>
