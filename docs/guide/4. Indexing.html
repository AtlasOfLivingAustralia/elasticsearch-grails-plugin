<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>4. Indexing 0.15.1.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/1. Introduction.html"><strong>1.</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/2. Configuration.html"><strong>2.</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/3. Mapping.html"><strong>3.</strong><span>Mapping</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/4. Indexing.html"><strong>4.</strong><span>Indexing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/5. Searching.html"><strong>5.</strong><span>Searching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/6. Example.html"><strong>6.</strong><span>Example</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>elasticsearch</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/3. Mapping.html">&lt;&lt; <strong>3.</strong><span>Mapping</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/5. Searching.html"><strong>5.</strong><span>Searching</span> >></a></div>
                


                <div class="project">
                    <h1>4. Indexing - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Manuarii Stein, Stephane Maldini, Serge P. Nekoval</p>

                    <p><strong>Version:</strong> 0.15.1.1</p>
                </div>

                

                
<h1><a name="4. Indexing">4. Indexing</a></h1>
With its default configuration (with the <code>disableAutoIndex</code> configuration key set to <code>false</code>), the plugin is indexing
automatically any searchable domains when GORM/Hibernate do a save or an update in the database.
It also delete automatically from the index any document corresponding to a domain that is deleted from the database.
You normally shouldn't have to worry about indexing, but sometimes you may have to do it by yourself, for example on dirty
domain object that you may not want to save right now.<p class="paragraph"/>The plugin is providing a few injected methods in the domain or in the <code>ElasticSearchService</code> to allow that.<p class="paragraph"/><h3>Index examples</h3>
<div class="code"><pre>// Index all searchable instances
elasticSearchService.index()<p class="paragraph"/>// Index a specific domain instance
MyDomain md = <span class="java&#45;keyword">new</span> MyDomain(value:'that')
md.save()
elasticSearchService.index(md)<p class="paragraph"/>// Index a collection of domain instances
def ds = &#91;<span class="java&#45;keyword">new</span> MyDomain(value:'that'), <span class="java&#45;keyword">new</span> MyOtherDomain(name:'<span class="java&#45;keyword">this</span>'), <span class="java&#45;keyword">new</span> MyDomain(value:'thatagain')&#93;
ds&#42;.save()
elasticSearchService.index(ds)<p class="paragraph"/>// Index all instances of the specified domain class
elasticSearchService.index(MyDomain)
elasticSearchService.index(class:MyDomain)
elasticSearchService.index(MyDomain, MyOtherDomain)
elasticSearchService.index(&#91;MyDomain, MyOtherDomain&#93;)</pre></div><p class="paragraph"/><h3>Unindex examples</h3>
<div class="code"><pre>// Unindex all searchable instances
elasticSearchService.unindex()<p class="paragraph"/>// Unindex a specific domain instance
MyDomain md = <span class="java&#45;keyword">new</span> MyDomain(value:'that')
md.save()
elasticSearchService.unindex(md)<p class="paragraph"/>// Unindex a collection of domain instances
def ds = &#91;<span class="java&#45;keyword">new</span> MyDomain(value:'that'), <span class="java&#45;keyword">new</span> MyOtherDomain(name:'<span class="java&#45;keyword">this</span>'), <span class="java&#45;keyword">new</span> MyDomain(value:'thatagain')&#93;
ds&#42;.save()
elasticSearchService.unindex(ds)<p class="paragraph"/>// Unindex all instances of the specified domain class
elasticSearchService.unindex(MyDomain)
elasticSearchService.unindex(class:MyDomain)
elasticSearchService.unindex(MyDomain, MyOtherDomain)
elasticSearchService.unindex(&#91;MyDomain, MyOtherDomain&#93;)</pre></div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/3. Mapping.html">&lt;&lt; <strong>3.</strong><span>Mapping</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/5. Searching.html"><strong>5.</strong><span>Searching</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Controller</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Controller/attach.html">attach</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/delete.html">delete</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/discard.html">discard</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/getDirtyPropertyNames.html">getDirtyPropertyNames</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/getPersistentValue.html">getPersistentValue</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/getProperty.html">getProperty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/instanceOf.html">instanceOf</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/invokeMethod.html">invokeMethod</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/isAttached.html">isAttached</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/isDirty.html">isDirty</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/lock.html">lock</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/merge.html">merge</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/methodMissing.html">methodMissing</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/refresh.html">refresh</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/save.html">save</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Controller/validate.html">validate</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Domain/index.html">index</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain/unindex.html">unindex</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain Methods</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Domain Methods/search.html">search</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">ElasticSearchService</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/ElasticSearchService/index.html">index</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/ElasticSearchService/search.html">search</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/ElasticSearchService/unindex.html">unindex</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Injected Domain Dynamic Methods</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Injected Domain Dynamic Methods/index.html">index</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Injected Domain Dynamic Methods/unindex.html">unindex</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
