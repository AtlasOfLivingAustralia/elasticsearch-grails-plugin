<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3.1 QuickStart 0.0.4.5</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/configuration.html"><strong>2</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/mapping.html"><strong>3</strong><span>Mapping</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/indexing.html"><strong>4</strong><span>Indexing</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/searching.html"><strong>5</strong><span>Searching</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/admin.html"><strong>6</strong><span>Admin</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/lowLevelAPI.html"><strong>7</strong><span>Low level API</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/example.html"><strong>8</strong><span>Example</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>The revived Elasticsearch plugin for Grails.</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/configuration.html">&lt;&lt; <strong>2</strong><span>Configuration</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/indexing.html"><strong>4</strong><span>Indexing</span> >></a></div>
                


                <div class="project">
                    <h1>3.1 QuickStart - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Noam Y. Tenne, Manuarii Stein, Stephane Maldini, Serge P. Nekoval, Marcos Carceles</p>

                    <p><strong>Version:</strong> 0.0.4.5</p>

                    
                </div>

                

                

<h2 id="quickStart">3.1 QuickStart</h2>
<h4>Default mapping</h4>
To declare a domain class to be searchable, the simplest way is to define the following static property in the code:
<div class="code"><pre><span class="java&#45;keyword">static</span> searchable = <span class="java&#45;keyword">true</span></pre></div>
The plugin will generate a default mapping for each properties of the domain.<p class="paragraph"/><h4>Custom mapping</h4>
You can customize how each properties are mapped to the index using a closure. The syntax is similar to GORM's mapping DSL.
<div class="code"><pre><span class="java&#45;keyword">static</span> searchable = &#123;
    // mapping DSL&#8230;
&#125;</pre></div>
See below for more details on the mapping DSL.<p class="paragraph"/><h4>Limit properties with only/except</h4>
<code>only</code> and <code>except</code> are used to limit the properties that are made searchable.
You may not define both except &#38; only settings at the same time.<p class="paragraph"/>The following code will only map the 'message' property, any others will be ignored.
<div class="code"><pre>class Tweet &#123;
    <span class="java&#45;keyword">static</span> searchable = &#123;
        only = 'message'
    &#125;
    <span class="java&#45;object">String</span> message
    <span class="java&#45;object">String</span> someUselessField
&#125;</pre></div><p class="paragraph"/>The following code will map all properties except the one specified.
<div class="code"><pre>class Tweet &#123;
    <span class="java&#45;keyword">static</span> searchable = &#123;
        except = 'someUselessField'
    &#125;
    <span class="java&#45;object">String</span> message
    <span class="java&#45;object">String</span> someUselessField
&#125;</pre></div><p class="paragraph"/>You can use a Collection to specify several properties.
<div class="code"><pre>class Tweet &#123;
    <span class="java&#45;keyword">static</span> searchable = &#123;
        except = &#91;'someUselessField', 'userName'&#93;
    &#125;
    <span class="java&#45;object">String</span> message
    <span class="java&#45;object">String</span> userName
    <span class="java&#45;object">String</span> someUselessField
&#125;</pre></div><p class="paragraph"/><blockquote class="note">The properties that are ignored will not be sent to ElasticSearch. It also means that when you will get back a domain
from ElasticSearch, some fields that are not supposed to be null, may still be null.</blockquote><p class="paragraph"/><h4>Including transients</h4><p class="paragraph"/>How the plugin manages transient properties is controlled by the <code>elasticSearch.includeTransients</code> configuration property. If this is set to <code>false</code> only transient properties explictly included in <code>only</code> will be mapped and searchable, if set to <code>true</code>, all domain class properties will be mapped, including <code>transients</code>.<p class="paragraph"/>The following are valid examples<p class="paragraph"/><div class="code"><pre>//assert grailsApplication.config.elasticSearch.includeTransients == <span class="java&#45;keyword">false</span>
class Person &#123;
    <span class="java&#45;object">String</span> firstName
    <span class="java&#45;object">String</span> lastName
    <span class="java&#45;object">String</span> getFullName() &#123;
        firstName + <span class="java&#45;quote">" "</span> + lastName
    &#125;
    <span class="java&#45;keyword">static</span> transients = &#91;'fullName'&#93;
    <span class="java&#45;keyword">static</span> searchable = &#123;
        only = &#91;'fullName'&#93;
    &#125;
&#125;
// <span class="java&#45;keyword">new</span> Person(firstNameme: <span class="java&#45;quote">"Nikola"</span>, lastName: <span class="java&#45;quote">"Tesla"</span>)
// can be found using:
// def tesla = Person.search(<span class="java&#45;quote">"Nikola Tesla"</span>).searchResults.first()</pre></div><p class="paragraph"/><div class="code"><pre>//assert grailsApplication.config.elasticSearch.includeTransients == <span class="java&#45;keyword">true</span>
class Multiplication &#123;
    <span class="java&#45;object">int</span> opA
    <span class="java&#45;object">int</span> opB
    <span class="java&#45;object">int</span> getResult() &#123;
        opA &#42; opB
    &#125;
    <span class="java&#45;keyword">static</span> transients = &#91;'result'&#93;
    <span class="java&#45;keyword">static</span> searchable = <span class="java&#45;keyword">true</span>
&#125;
// <span class="java&#45;keyword">new</span> Multiplication(opA: 2, opB: 3)
// can be found using:
// def multiplication = Multiplication.search(<span class="java&#45;quote">"2"</span>).searchResults.first()
// def multiplication = Multiplication.search(<span class="java&#45;quote">"3"</span>).searchResults.first()
// def multiplication = Multiplication.search(<span class="java&#45;quote">"6"</span>).searchResults.first()</pre></div><p class="paragraph"/><blockquote class="note">
From the examples above, once the domain object is found, its transient values will be calculated from the information stored on ElasticSearch: <code>multiplication.result == 6</code>, but <code>tesla.fullName == "null null"</code>, as firstName and lastName where not indexed. This behaviour can be prevented by creating convenient setters for the transient properties.
</blockquote><p class="paragraph"/><h4>Transients and collections</h4><p class="paragraph"/>When transient properties are collections the only way the plugin can define the correct ElasticSearch mapping during boot is if the element types are explicitly defined on the grails domain object. For instances of <code>Collection</code> this can be achieved by defining its type on the <code>hasMany</code> property (otherwise the ElasticSearch type will be defined as <code>object</code>). This is not required for arrays.<p class="paragraph"/>Some valid examples:
<div class="code"><pre>class Tweet &#123;
    <span class="java&#45;object">String</span> message
    List getHashtags() &#123; &#8230; &#125;
    <span class="java&#45;keyword">static</span> transients = &#91;'hashtags'&#93;
    <span class="java&#45;keyword">static</span> hasMany = &#91;hashtags: <span class="java&#45;object">String</span>&#93;
    <span class="java&#45;keyword">static</span> searchable = &#123;only = 'hashtags' &#125;
&#125;</pre></div><p class="paragraph"/><div class="code"><pre>class FamilyGuy &#123;
    <span class="java&#45;object">String</span> wife
    <span class="java&#45;object">String</span> son
    <span class="java&#45;object">String</span> daughter
    <span class="java&#45;object">String</span> baby
    <span class="java&#45;object">String</span>&#91;&#93; getRelatives() &#123; &#8230; &#125;
    <span class="java&#45;keyword">static</span> transients = &#91;'relatives'&#93;
    <span class="java&#45;keyword">static</span> searchable = &#123; only = 'relatives' &#125;
&#125;</pre></div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/configuration.html">&lt;&lt; <strong>2</strong><span>Configuration</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/indexing.html"><strong>4</strong><span>Indexing</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Dynamic Domain Methods</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Dynamic%20Domain%20Methods/countHits.html">countHits</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Dynamic%20Domain%20Methods/index.html">index</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Dynamic%20Domain%20Methods/search.html">search</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Dynamic%20Domain%20Methods/unindex.html">unindex</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">ElasticSearchAdminService</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/ElasticSearchAdminService/deleteIndex.html">deleteIndex</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/ElasticSearchAdminService/refresh.html">refresh</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">ElasticSearchService</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/ElasticSearchService/countHits.html">countHits</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/ElasticSearchService/index.html">index</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/ElasticSearchService/search.html">search</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/ElasticSearchService/unindex.html">unindex</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
